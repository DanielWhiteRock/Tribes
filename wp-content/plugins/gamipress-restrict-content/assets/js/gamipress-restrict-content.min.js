(function($){var $body=$('body');$body.on('click','.gamipress-restrict-content-unlock-post-with-points-button, .gamipress-restrict-content-unlock-content-with-points-button',function(e){var button=$(this);var submit_wrap;var data={};if(button.hasClass('gamipress-restrict-content-unlock-post-with-points-button')){submit_wrap=button.closest('.gamipress-restrict-content-unlock-post-with-points');data={action:'gamipress_restrict_content_unlock_post_with_points',nonce:gamipress_restrict_content.nonce,post_id:button.data('id')}}else{submit_wrap=button.closest('.gamipress-restrict-content-unlock-content-with-points');data={action:'gamipress_restrict_content_unlock_content_with_points',nonce:gamipress_restrict_content.nonce,content_id:button.data('id'),post_id:button.data('post-id')}}
var spinner=submit_wrap.find('.gamipress-spinner');button.prop('disabled',!0);if(submit_wrap.find('.gamipress-restrict-content-response').length){submit_wrap.find('.gamipress-restrict-content-response').slideUp()}
spinner.show();$.ajax({url:gamipress_restrict_content.ajaxurl,method:'POST',dataType:'json',data:data,success:function(response){if(submit_wrap.find('.gamipress-restrict-content-response').length===0){submit_wrap.prepend('<div class="gamipress-restrict-content-response gamipress-notice" style="display: none;"></div>')}
var response_wrap=submit_wrap.find('.gamipress-restrict-content-response');response_wrap.addClass('gamipress-notice-'+(response.success===!0?'success':'error'));var message=(response.data.message!==undefined?response.data.message:response.data);response_wrap.html(message);response_wrap.slideDown();spinner.hide();if(response.success===!0){button.slideUp();if(response.data.redirect!==undefined){window.location.href=response.data.redirect}else{location.reload(!0)}}else{button.prop('disabled',!1)}}})})})(jQuery)