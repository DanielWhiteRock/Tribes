(function($){var $body=$('body');$body.on('click','.gamipress-restrict-unlock-access-with-points-button',function(e){var button=$(this);var submit_wrap;submit_wrap=button.closest('.gamipress-restrict-unlock-access-with-points');var spinner=submit_wrap.find('.gamipress-spinner');button.prop('disabled',!0);if(submit_wrap.find('.gamipress-restrict-unlock-response').length)
submit_wrap.find('.gamipress-restrict-unlock-response').slideUp();spinner.show();$.ajax({url:gamipress_restrict_unlock.ajaxurl,method:'POST',dataType:'json',data:{action:'gamipress_restrict_unlock_access_with_points',nonce:gamipress_restrict_unlock.nonce,post_id:button.data('id')},success:function(response){if(submit_wrap.find('.gamipress-restrict-unlock-response').length===0)
submit_wrap.prepend('<div class="gamipress-restrict-unlock-response gamipress-notice" style="display: none;"></div>')
var response_wrap=submit_wrap.find('.gamipress-restrict-unlock-response');response_wrap.addClass('gamipress-notice-'+(response.success===!0?'success':'error'));var message=(response.data.message!==undefined?response.data.message:response.data);response_wrap.html(message);response_wrap.slideDown();spinner.hide();if(response.success===!0){button.slideUp();if(response.data.redirect!==undefined)
window.location.href=response.data.redirect;else location.reload(!0)}else{button.prop('disabled',!1)}}})})})(jQuery)